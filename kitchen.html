<!DOCTYPE html>
<html>
<head>
  <title>Kitchen</title>
</head>
<body>

<h2>Kitchen â€“ Ingredient Input</h2>

<div>
  Ingredient 1:
  <input id="name1" placeholder="Ingredient name">
  <input id="qty1" type="number" step="0.01" placeholder="Quantity (kg)">
</div><br>

<div>
  Ingredient 2:
  <input id="name2" placeholder="Ingredient name">
  <input id="qty2" type="number" step="0.01" placeholder="Quantity (kg)">
</div><br>

<div>
  Ingredient 3:
  <input id="name3" placeholder="Ingredient name">
  <input id="qty3" type="number" step="0.01" placeholder="Quantity (kg)">
</div><br>

<button onclick="saveStock()">Save Stock</button>

<script src="firebase.js"></script>
<script type="module">
  import { doc, setDoc } from
  "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // Recipe for ONE Fried Rice
  const recipe = {
    rice: 0.25,
    oil: 0.05,
    veg: 0.20
  };

  window.saveStock = async function () {
    let counts = [];

    for (let i = 1; i <= 3; i++) {
      const name = document.getElementById("name" + i).value.trim().toLowerCase();
      const qty = Number(document.getElementById("qty" + i).value);

      if (!name || qty <= 0) continue;

      await setDoc(doc(db, "ingredients", name), {
        quantity: qty
      });

      if (recipe[name]) {
        counts.push(Math.floor(qty / recipe[name]));
      }
    }

    const available = counts.length ? Math.min(...counts) : 0;

    await setDoc(doc(db, "menu", "fried_rice"), {
      available: available
    });

    alert("Stock saved successfully");
  };
</script>

</body>
</html>
